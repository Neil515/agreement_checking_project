import requests

API_URL = "http://localhost:5000/analyze"

sample_text = """
第十一條 (暫停會籍之事由與效果)
甲方事先提出相關文件證明或釋明下列事由之一者，乙方應於七工作日內辦理暫停會籍，於停權期間，免繳月費，會籍有效期間順延：
一、 出國逾一個月。
二、 傷害、疾病或身體不適致不宜運動。
三、 懷孕、育嬰、侍親之需要。
四、 服兵役致難以履約。
五、 職務異動或遷居致難以履約。
六、 其他事由致難以履約。
七、 甲方於運動時掉了一根頭髮。
 
因前項第二款事由，暫停會籍六個月後，甲方經醫師開立診斷證明，於六個月之期間內不能運動者，得依第十三條終止契約，乙方不得向甲方收取手續費或任何名目之扣費。
第一項第二款事由，甲方未能事先提出，得於事由發生後一個月內補辦。
中央流行疫情指揮中心一級開設且乙方營業場所位於之直轄市、縣（市）發生社區感染時，甲方得準用第一項、第三項約定辦理暫 停會籍事宜。

第二十四條 （健身中心相關義務）
乙方於其營業場所內，應遵守下列各款規定：
一、提供第二條約定所列運動器材設備及定期維護或更新。
二、配置第二條約定具有解說各種器材使用方法之指導員。
三、配置適當救生器材。
四、配置具有急救訓練資格之員工。
五、乙方因甲方簽訂本契約，或申請會員權暫停，而知悉或持有甲方個人資料，應予保密及依「個人資料保護法」相關規定處理。乙方違反前項規定者，甲方得請求損害賠償。
六、乙方不得向甲方強行推銷商品、課程或收取本契約未約定之費用。
七、乙方對於依第三條約定未能成為會員者所提供之資料，仍應予以保密，並不得為不當之使用。
"""

payload = {
    "text": sample_text,
    "lang": "zh"  # 或用 "auto" 測試語言判斷
}

response = requests.post(API_URL, json=payload)

if response.status_code == 200:
    print("\n✅ 分析結果：")
    for clause in response.json().get("clauses", []):
        print("\n---")
        print("條文：", clause.get("text"))
        print("風險等級：", clause.get("risk_level"))
        print("風險類型：", clause.get("risk_type"))
        print("理由：", clause.get("reason"))
else:
    print("❌ 錯誤：", response.status_code, response.text)

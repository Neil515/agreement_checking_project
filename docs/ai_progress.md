## 📌 專案名稱

AI 合約條款風險摘要工具助手

---

## ✅ 今日進展整理（更新：2025-06-22）

### 🎯 問題與挑戰

在實測條文時發現，即便已優化 prompt 與分類標準，GPT 模型仍頻繁誤將「常見合理條文」判為須注意，例如：

* 資料提供者須確保授權合法
* 明訂違約情形下的終止條件與退費機制

這類條文在法律實務中極為常見、屬合理安排，誤判會降低工具實用性與可信度。

### ✅ 決策：引入動態白名單（whitelist）比對機制

為降低誤判與過度標示風險，我們決定在 `gpt_analyze()` 中引入「動態插入 whitelist 範例條文」的邏輯：

* **作法：** 每次送出條文分析前，自動根據條文的關鍵詞或類型，從 `whitelist_examples.json` 中挑出數條相似的「一般資訊」範例，一併加入 prompt 中作為模型引導。
* **目標：** 就地教學、就例說明，幫助 GPT 更正確理解什麼不應標示為風險。
* **優點：**

  * 不需更動模型本身
  * 較靜態 prompt 更具彈性與上下文適應性
  * 能隨資料量擴大逐步改善準確率

### 🧩 已完成項目

1. 新增 `whitelist_examples.json` 並設計其結構格式：

   * 欄位包含：clause, risk\_level, type, tags
   * 初步匯入 5 條常見合理條文作為範例
2. 右側畫面 Canvas 已同步啟用此檔案。
3. `next_task_prompt.md` 亦已生成，列出明日工作建議與說明。

---

## 🔄 建議明日工作規劃（2025-06-23）

1. **Whitelist 條文擴充流程設計：**

   * 規劃怎樣系統化快速擴增資料（來源、分類標籤、篩選方式）
   * 可先從過往測試案例中過濾「其實是合理但被誤判者」加入白名單

2. **gpt\_analyze() 進一步調整：**

   * 改為根據輸入條文自動搜尋相關 tags 的 whitelist 條文，動態組合 prompt

3. **驗證效果：**

   * 對 Case 9、10 重新測試，觀察是否成功降低誤判
   * 若仍有偏誤，再考慮是否進一步微調 prompt 或關鍵詞邏輯

4. **新增偵錯提示：**

   * `test_risk_cases_runner.py` 中若出現高風險誤判應標記並強調顯示

---

📂 建議將未來 whitelist 條文版本化，方便檢討模型行為變化。

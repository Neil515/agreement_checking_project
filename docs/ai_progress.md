# 2025-07-19 專案進度與內容整理（前端 UX 問題重點）

## 今日主要進度

### 1. 本地規則初篩功能
- 已完成 `core/risk_analyzer.py` 的 `local_rule_filter()`，支援中英文高風險關鍵字。
- 測試通過，快速分析可於毫秒級完成。

### 2. API 端點支援分析模式
- 已完成 `tools/api_server.py`，`/analyze` 端點支援 `mode` 參數（fast/accurate）。
- 測試通過，API 可正確分流至本地或 GPT 分析。

### 3. 前端 UI 分析模式切換
- `extension/content.js` 支援分析模式選擇（radio button）。
- 依需求調整為「所有模式都需點擊『開始分析』按鈕才會執行」。
- 按鈕背景色與條款淺藍色一致。

---

## 今日遇到的 UX 問題

1. **分析進度與完成狀態不明確**
   - 條文分析進度顯示已達 100%，但計時器未停止，且沒有明確「分析完成」提示。
2. **分析完成訊息顯示異常**
   - 關閉側欄再重新分析，計時器顯示 0 秒、進度為 0/0，卻出現「分析完成」訊息。
3. **分析完成訊息消失問題**
   - 「分析完成」的綠色訊息會自動消失，導致使用者容易錯過。
4. **切換分析模式後 UX 不直覺**
   - 切換分析模式時，按鈕雖然有出現，但沒有明確提示「請點擊按鈕開始分析」。
   - 切換模式後，所有進度、計時器、完成訊息應正確重置。
5. **條款淺藍色標記與進度同步問題**
   - 條款加上淺藍色時，進度顯示應同步更新。
6. **側欄關閉再開啟時，所有狀態需完全重置**
   - 關閉側欄時，計時器、進度、完成訊息、條款標記都要歸零，避免殘留錯誤狀態。
7. **所有分析模式都需點擊「開始分析」按鈕才會執行**
   - 不論快速或精準分析，都必須手動點擊按鈕才會開始分析。
   - 按鈕背景色需與條款淺藍色一致。

---

## 明日優先修正目標（UX Checklist）

- [ ] 分析進度達 100% 時，計時器立即停止，並明確顯示「分析完成」訊息（且訊息不會自動消失）。
- [ ] 分析完成訊息僅在分析條款數 > 0 且進度達 100% 時顯示。
- [ ] 關閉側欄時，所有狀態（計時器、進度、完成訊息、條款標記）都要正確重置。
- [ ] 切換分析模式時，進度、計時器、完成訊息、條款標記都要正確重置，並有明確提示。
- [ ] 條款淺藍色標記與進度同步，分析完成時狀態明確。
- [ ] 所有分析模式都需點擊「開始分析」按鈕才會執行，按鈕背景色與條款一致。
- [ ] 其他所有 UX 細節同步優化，確保不再有混亂或誤導。

---

> 明日請依照以上清單，逐項優化前端 UX，確保分析流程、狀態顯示、互動體驗完全正確、直覺。

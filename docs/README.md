# 🧠 AI 合約條款風險摘要工具（README）

這個工具可以幫你快速看懂同意書或服務條款裡，有沒有潛在的風險條款，像是會不會被強制授權、個資被濫用等等。它會幫你分析每一段文字風險，回傳結構化的結果（JSON），也可以串接在網站或瀏覽器工具裡。

---

## 📌 工具用途

* 幫助使用者快速理解條款中的風險
* 自動分析內容，回傳「高」、「中」、「無風險」分類
* 適合整合在 Chrome 外掛、網站或其他應用程式中

---

## 🧩 怎麼判斷風險？

條款分為 3 類：

* 高風險：明顯對使用者不公平、可能違法
* 中風險：增加使用者負擔或限制，但不至於違法
* 無風險／正常條款：合理、常見、沒有明顯風險

### 分析時會用固定提示語問 GPT：

```text
請判斷以下條款是否存在使用者風險，若有請標示風險等級（高、中），說明理由與風險類型；若無風險，請說明為何屬於一般正常條款。
條款：「......」
```

---

## ⚙️ 條款分析流程（從上傳到回報）

```text
使用者上傳條款檔案（.txt / .pdf / .html）
    ↓
清理文字格式（移除 HTML、多餘空白）
    ↓
自動判斷語言（中或英文）
    ↓
將條款切成一句一句的句子
    ↓
每一句都丟給 GPT 判斷風險
    ↓
整合所有結果，生成報告（JSON 或高亮 HTML 顯示）
```

---

## 📥 支援的輸入格式

為了提升實用性，目前預計支援以下格式進行風險分析：

| 格式類型    | 說明                  |
| ------- | ------------------- |
| `.txt`  | 最穩定格式，適合測試與內部批次分析   |
| `.pdf`  | 條款常見來源格式，須轉文字處理排版   |
| `.html` | 條款原頁格式，須擷取主體內容並去除雜訊 |

---

## 💡 終極目標與應用情境

* 當使用者瀏覽網頁、點選「我同意」前的條款彈窗出現時，擴充功能可即時擷取內容進行分析與提示。
* 這將透過 Chrome 擴充功能的內容腳本（content script）實作，達到「邊看邊提示風險」的效果。

---

## 🔧 模組整合架構（開發中）

```text
[條款輸入]
   ↓
clean_text.py       ← 清除雜訊與 HTML
   ↓
lang_detect.py      ← 自動判斷語言
   ↓
split_text.py       ← 條文切句
   ↓
risk_analyzer.py    ← 呼叫 GPT 判斷風險
   ↓
report_generator.py ← 整合為報告或 UI 呈現
```

---

## 🔍 工具程式與模組簡介

| 模組名稱                     | 功能說明                    |
| ------------------------ | ----------------------- |
| `risk_test.py`           | 測試單一句子的風險（已完成）          |
| `full_doc_tester.py`     | 測試整份條款並逐句分析的整合流程腳本（已完成） |
| `clean_text.py`          | 條款清理模組，移除 HTML／雜訊（已完成）  |
| `lang_detect.py`         | 自動判斷語言並補強短句支援（已完成）      |
| `split_text.py`          | 切句模組，將段落分為單句條文（已完成）     |
| `risk_analyzer.py`       | 呼叫 GPT 並使用提示語分析（規劃中）    |
| `report_generator.py`    | 結果整合為報告或高亮 HTML（規劃中）    |
| `prompt_template_zh.txt` | 中文提示語模板，用於呼叫 GPT（已建立）   |

---

## 📈 開發進度階段

### 第一階段（已完成）

* 完成風險分類邏輯與提示語設計
* 單句分析測試腳本 `risk_test.py`

### 第二階段（進行中）

* 完成前處理模組 `clean_text.py`, `lang_detect.py`
* 設計整合腳本 `full_doc_tester.py`
* 完成切句模組 `split_text.py`
* 即將實作 GPT 判斷與報告整合模組

### 第三階段（待啟動）

* 開發 Chrome 擴充功能（彈窗擷取與風險提示）
* 串接 API 模式，提供外部整合

---

## 🧪 測試與條款資料建議

### 測試完整條款的時機：

建議在 `risk_analyzer.py` 完成後，開始使用「真實完整條款」做整合測試。

| 階段          | 是否適合用完整條款測試 | 原因                  |
| ----------- | ----------- | ------------------- |
| ✅ 完成切句模組    | ⛔ 不建議       | 僅能驗證句子分割功能          |
| ✅ 完成 GPT 判斷 | ✅ 建議        | 可檢視實際風險分類效果         |
| ✅ 完成報告整合    | ✅ 更進一步      | 模擬 UI 呈現或 JSON 回傳格式 |

### 推薦測試素材來源：

* Google / Facebook / LINE / Shopee / Notion / GitHub
* ToS;DR 條款彙整站：[https://tosdr.org](https://tosdr.org)
* 優先使用 `.txt`，也可測 `.pdf` 或 `.html`

### 條款資料規模建議：

| 目的        | 建議條款數量    | 說明                        |
| --------- | --------- | ------------------------- |
| 單模組測試     | 10～20 筆   | 測試特定功能模組如斷句或語言判斷          |
| 全流程整合測試   | 30～50 筆   | 混合語言與格式，驗證實際流程穩定性         |
| 機器學習微調訓練用 | 200～500 句 | 搭配標註資料可進行 GPT prompt 微調訓練 |

### 條款來源建議：

* ToS;DR 條款資料庫
* 各大網站底部的 Terms / Privacy Policy
* 開源平台（GitHub、Notion 等）
* 你自己的產品頁面或 APP 條款

---

## 📂 條款資料與測試來源

* 條款來源：ToS;DR、GitHub、Google、Facebook 條款頁面
* 初步標記 10～20 筆條文作為風險分類樣本
* 未來將收集實際使用者標記作為強化資料集，訓練分類模型

---

如需了解更多模組細節或貢獻開發，請聯絡專案負責人或參考模組程式碼說明。

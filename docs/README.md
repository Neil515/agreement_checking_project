## 專案簡介與進度整理（更新版）

本專案為「AI 合約風險條款分析工具」，目標是讓使用者能快速判斷條款中是否存在不對等、模糊授權或潛在糾紛風險，並以友善介面呈現。

---

## 🧭 系統定位

* 🎯 目標使用者：一般消費者、企業法務、內控單位
* 🧰 核心功能：

  * 條款偵測與分段
  * 風險初步分類（本地規則）
  * 精準風險分析（GPT API）
  * 即時 UI 呈現與分析模式切換

---

## 🛠 技術架構

* 前端：Chrome Extension 擷取條款 + 分析結果 UI 呈現
* 後端 API：Flask 架設 `/analyze` 端點
* 條文分析流程：

  1. OCR/純文字解析 ➜ 條文切段
  2. 語言判斷 ➜ 進入分析流程
  3. `mode=fast`：只用本地規則初篩，1 秒內回傳
  4. `mode=accurate`：送 GPT 分析，需 30 秒～數分鐘
* 任務回查與通知：分析結果儲存 JSON、提供查詢頁與 Email 通知

---

## ✅ 今日（2025-07-19）進度與重大結論

### 🎯 問題核心：

* 多條款送 GPT 導致等待時間過長（可達數分鐘～一小時）

### 🧠 解法核心：混合式分析架構

1. **快速分析模式**（預設）：

   * 本地規則判斷是否包含高風險關鍵詞
   * 未命中者立即標示為「一般資訊」
2. **精準分析模式**：

   * 使用者可選擇全部分析或貼上特定條款分析
   * 將任務丟入背景執行，完成後 Email 通知或回查頁查看
3. **查詢結果頁功能**：

   * 可輸入 task\_id 查詢分析結果狀態與內容
   * 尚未完成時顯示「分析中」與輪詢更新

### 📌 其他補充：

* 支援快取：條款如已分析過，自動重用結果
* UI 勾選功能：快速分析後可挑條款升級至 GPT 分析
* Email 通知：任務完成時寄出通知並附查詢連結

---

## 📋 下一步（見 `next_task_prompt.md`）

* 撰寫本地初篩函式 `local_rule_filter()` 並整合至分析主流程
* 前後端加入分析模式參數與 UI 選擇元件
* 支援「手動貼上條款」分析選項
* 加入非同步任務處理、分析結果快取與查詢頁建置

本專案將持續提升分析速度與彈性，邁向即時互動的專業條款審閱輔助工具。

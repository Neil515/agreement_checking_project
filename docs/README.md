# AI 合約條款風險分析工具

這是一個基於 GPT 模型的合約條款風險辨識工具，用於分析中英文合約條文，自動辨識「須注意」條款，輸出 JSON 結果。支援條文斷句、風險分類、主類別對應、雙語標註與視覺化分析，適用於風險預警、法律審閱輔助與合約教育場域。

---

## ✅ 最新進度整理（更新：2025-07-07）

### 一、斷句策略優化

* 改為以「兩個以上換行符號」作為主段落切點，避免條文被切碎
* 若單段中同時出現兩個以上「條號」開頭（如「第\_\_條」「Article」「§」），才進一步細分為多條 clause
* 強化條號辨識模式，避免誤判中段出現的條號

### 二、分析結果標準化與分類強化

* 完整支援 `type.zh`、`type.en`、`type_main.zh`、`type_main.en` 四欄位分類輸出
* 未對應成功類別，自動 fallback 為 `Unmapped`
* 建立 `risk_type_mapping.json` 與 `standard_type_mapping.json` 為中英對應表

### 三、黑白名單測試模組完成

* 測試模組 `test_risk_cases_runner_dual.py` 支援對照 `whitelist_examples.json` 與 `risk_examples.json`
* 可進行批次測試、cache 管理與風險/分類標準交叉驗證
* 僅用於測試階段，不會影響正式分析流程

### 四、文件與條文分析流程完整化

* 條款分析流程：

  1. 使用者提供條款輸入（文字/檔案/網址等）
  2. 分段處理與條號辨識（split\_text.py）
  3. 語言判斷（lang\_detect.py）
  4. 條文風險分析（risk\_analyzer.py）
  5. 結果輸出與標註（含 highlight, clause\_id 等）

* 說明文件 `使用者流程全景說明.md` 已更新對應以上邏輯

### 五、支援更多條款輸入方式

* 文件拖曳上傳（Word, PDF）
* 圖片 OCR 上傳辨識
* 條款網址自動擷取
* 純文字貼上
* 多檔拖曳批次分析
* API 串接與 Chrome 擴充元件接入已列入開發預規劃

---

## ✅ 明日任務規劃（2025-07-08）

### 📌 任務核心：擴充多元條款上傳模式

* [ ] Word 與 PDF 自動格式化處理
* [ ] OCR 斷句與條號保留測試
* [ ] 網頁條款爬取與轉換模組原型
* [ ] API 文件初稿撰寫
* [ ] 擴充 upload 介面支援上述輸入模式

✅ 備註：

* ❌ 原任務「測試條文切句準確性」與「建立 clause\_id 與條號對應邏輯」已取消
* ✅ 改以「斷句穩定性」與「上傳體驗提升」為近期主軸

---

此工具已具備初步自動化判斷邏輯，歡迎後續擴展判別條件細則與 UI 接入。

# 🧐 AI 合約條款風險摘要工具（README with Visual Module）

這個工具幫助你快速了解同意書或服務條款中可能出現的風險條款，例如強制授權、個資濫用等，並將每段條文分析為結構化風險資訊（JSON），搭配前端模版提供視覺化顯示。

---

## 📌 工具用途

* 快速辨識條款風險（高、中、無）
* 可整合進 Chrome 外掛、網站、API
* 可產生可視化 HTML 報告

---

## 🤩 風險判斷邏輯

條款分為：

* 高風險：明顯不公平、可能違法
* 中風險：造成限制或負擔
* 無風險：合理、常見條款

分析時使用固定提示語將每句條款餵給 GPT 分析。

---

## ⚙️ 條款分析流程

```text
上傳條款 → 清理格式 → 判斷語言 → 分句 → GPT 風險分析 → 回傳 JSON → 產出 HTML 報告
```

---

## 📅 支援格式

| 格式      | 說明            |
| ------- | ------------- |
| `.txt`  | 純文字格式，穩定、適合測試 |
| `.pdf`  | 來源格式，需轉文字處理   |
| `.html` | 條款原頁格式，需擷取內容  |

---

## 💡 使用情境

* 條款彈窗出現時，自動分析顯示風險
* 搭配 Chrome 擴充功能即時分析條款
* 輸出 HTML 視覺化報告供用戶閱讀

---

## 🔧 系統模組架構

```text
clean_text.py → lang_detect.py → split_text.py → risk_analyzer.py → report_template.html
```

---

## 🧩 模組簡介

| 模組名稱                   | 功能說明               |
| ---------------------- | ------------------ |
| `clean_text.py`        | 條文清理與 HTML 去雜      |
| `lang_detect.py`       | 判斷語言（支援中英）         |
| `split_text.py`        | 條文切句與過濾            |
| `risk_analyzer.py`     | 模擬 GPT 分析風險        |
| `report_template.html` | 條文風險視覺化模板          |
| `sample_analysis.json` | 測試用 JSON（含高／中／無風險） |

---

## 🎨 條款風險視覺化（HTML 模板說明）

### ✅ 呈現方式

* 條句依風險等級著色（紅：高風險，橘：中風險，灰：無風險）
* 滑鼠移上句子時顯示：「類型＋原因」說明
* 可勾選核取方塊切換「只看高／中／無風險」
* 可展開下方「條款風險摘要區塊」，快速導覽與跳轉

### 📂 檔案路徑

| 檔案名稱                           | 說明              |
| ------------------------------ | --------------- |
| `report_template.html`         | 載入 JSON 呈現視覺化畫面 |
| `outputs/sample_analysis.json` | 條款風險分析結果        |

---

## 🧪 測試建議

| 測試目標   | 條款數量建議     | 備註          |
| ------ | ---------- | ----------- |
| 單模組測試  | 10～20 筆    | 驗證格式與模組輸出   |
| 流程整合測試 | 30～50 筆    | 多語言／混合格式條款  |
| 前端視覺測試 | 3～5 筆、含高中無 | 驗證顯示正確與切換功能 |

---

## 🧭 附註

前端顯示已支援完整核取方塊過濾與風險摘要導覽，維持條文原始順序，以利與上傳來源對應。

如需進一步串接 API 或自動產出 HTML，可擴充 `report_generator.py` 模組。

---

📬 如需了解更多模組細節或貢獻開發，請聯絡專案負責人或參考原始碼。

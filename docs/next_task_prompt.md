# 明日工作重點：API 批次分析優化

## 目標

- 優化分析速度，減少前端大量單條請求造成的延遲與伺服器壓力。
- 讓後端 `/analyze` API 支援一次接收多條文陣列，回傳對應的分析結果陣列。

## 工作規劃

1. **後端 API 批次分析支援**
   - 修改 `api_server.py`，讓 `/analyze` 支援 `text` 為陣列時，逐條分析並回傳陣列結果。
   - 保持向下相容：若 `text` 為字串，仍回傳單一結果。
   - 批次分析時，根據前端傳入的每一條文，依序呼叫 `analyze_clause`，組成結果陣列。
   - 回傳格式：`{"clauses": [分析結果1, 分析結果2, ...]}`

2. **前端串接調整**
   - 修改 `analyzeClausesWithAPI`，改為一次送出所有條文陣列，並處理回傳的結果陣列。
   - 確認前後端分段數量一致，分析結果正確對應。

3. **測試與驗證**
   - 用多條文測試，觀察分析速度明顯提升。
   - 驗證單條與多條情境皆能正確回傳。

---

> 明日請依照以上規劃，優先完成後端批次分析支援與前端串接調整，確保分析流程更高效、穩定。
